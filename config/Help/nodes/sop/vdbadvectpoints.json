{"body": [{"indent": 0, "text": ["VDB Advect Points"], "type": "title", "extent": [98, 120], "level": 0}, {"indent": 0, "type": "summary", "extent": [120, 191], "text": ["Moves points in the input geometry along a VDB velocity field."]}, {"type": "para", "indent": 0, "extent": [16, 105], "text": ["See ", {"text": ["volumes"], "fullpath": "/model/volumes", "scheme": null, "type": "link", "value": "/model/volumes"}, " for an explanation of standard volumes and OpenVDB volumes."]}, {"body": [{"indent": 0, "type": "para", "extent": [230, 317], "text": ["This node has different functions based on the value of the ", {"text": ["Operation"], "type": "ui"}, " parameter."]}, {"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [317, 376], "text": ["Move geometry points according to a VDB velocity field."]}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "ord", "extent": [473, 587], "text": ["Convert the \"sticky\" surface to a VDB SDF using the ", {"text": ["VDB from polygons node"], "fullpath": "/nodes/sop/vdbfrompolygons", "scheme": "Node", "type": "link", "value": "/nodes/sop/vdbfrompolygons"}, "."]}, {"indent": 4, "blevel": 6, "type": "ord", "extent": [587, 681], "text": ["Generate a \"nearest point\" VDB using the ", {"text": ["VDB Analysis node"], "fullpath": "/nodes/sop/vdbanalysis", "scheme": "Node", "type": "link", "value": "/nodes/sop/vdbanalysis"}, "."]}, {"indent": 4, "blevel": 6, "type": "ord", "extent": [681, 773], "text": ["Connect the points you want to stick, and the \"nearest point\" field, into this node."]}], "container": true, "type": "ord_group"}], "indent": 0, "text": ["Move points onto a surface using a VDB field storing the nearest surface point at each voxel."], "extent": [376, 473], "blevel": 2, "type": "bullet"}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [773, 1019], "text": ["Move geometry points according to a VDB velocity field ", {"text": ["and"], "type": "em"}, " stick them to a surface using a \"nearest point\" field (combine the first two operations). This lets you advect points through a velocity field while keeping them stuck to a surface."]}], "container": true, "type": "bullet_group"}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [1025, 1136], "text": ["The ", {"text": ["traillen"], "type": "code"}, " float attribute can be used to control how far particles\n    move on a per-particle basis."]}], "indent": 0, "role": "item", "type": "note", "extent": [1019, 1025]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "level": 2, "text": ["Overview"], "extent": [215, 230], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [1162, 1400], "text": [{"text": ["This node is not a feedback loop"], "type": "strong"}, ".\nIt moves the points it finds in the input geometry.\nIt ", {"text": ["cannot"], "type": "em"}, " modify the point locations over time.\n(That is, if you hook this node up to do advection, and press play, the points will not animate.)"]}, {"indent": 0, "type": "para", "extent": [1400, 1549], "text": ["To set up a feedback loop, where the advection at each frame affects the advected point positions from the previous frame, do one of the following:"]}, {"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [1549, 1608], "text": ["Do the advection inside a ", {"text": ["SOP Solver"], "fullpath": "/nodes/sop/solver", "scheme": "Node", "type": "link", "value": "/nodes/sop/solver"}, "."]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [1608, 1977], "text": ["Set ", {"text": ["Substeps"], "type": "ui"}, " to ", {"text": ["$F"], "type": "code"}, " and the ", {"text": ["Timestep"], "type": "ui"}, " to ", {"text": ["$T"], "type": "code"}, "\n  This will cause the node to recalculate, ", {"text": ["at every frame"], "type": "em"}, ", the path of every particle through ", {"text": ["every previous frame"], "type": "em"}, " to get the current one.\n  This is obviously not very practical, however the calculations are fast so it may be useful as a quick \"hack\" to animate the advection for small numbers of particles."]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 2, "text": ["Animating advection"], "extent": [1136, 1162], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [1997, 2074], "text": ["A subset of points in the first input to move using the velocity field."]}], "indent": 0, "text": ["Group"], "role": "item", "extent": [1989, 1997], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2088, 2171], "text": ["The name of a VDB primitive in the second input to use as the velocity field."]}, {"indent": 4, "type": "para", "extent": [2171, 2312], "text": ["This must be a vector-valued VDB primitive.  You can use the VDB Vector Merge SOP to turn a ", {"text": ["vel.[xyz]"], "type": "code"}, " triple into a single primitive."]}, {"indent": 4, "type": "para", "extent": [2312, 2364], "text": ["See ", {"fragment": "#group", "text": ["specifying volumes"], "value": "/model/volumes#group", "fullpath": "/model/volumes#group", "scheme": null, "type": "link"}, "."]}], "indent": 0, "text": ["Velocity VDB"], "role": "item", "extent": [2074, 2088], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2383, 2523], "text": ["The name of a VDB primitive in the third input to use for the closest point values.\n    See ", {"fragment": "#group", "text": ["specifying volumes"], "value": "/model/volumes#group", "fullpath": "/model/volumes#group", "scheme": null, "type": "link"}, "."]}], "indent": 0, "text": ["Closest Point VDB"], "role": "item", "extent": [2364, 2383], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2534, 2589], "text": ["How to use the velocity field to move the points."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [2604, 2659], "text": ["Move each point along the velocity field."]}], "indent": 4, "type": "dt", "extent": [2589, 2604], "text": ["Advection"]}, {"body": [{"indent": 8, "type": "para", "extent": [2675, 2771], "text": ["Move each point to the nearest surface point using the closest point\n        field"]}], "indent": 4, "type": "dt", "extent": [2659, 2675], "text": ["Projection"]}, {"body": [{"indent": 8, "type": "para", "extent": [2798, 2956], "text": ["Move the along the velocity field, and then project using the\n        closest point field.\n        This forces the particles to remain on a surface."]}], "indent": 4, "type": "dt", "extent": [2771, 2798], "text": ["Constrained Advection"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Operation"], "role": "item", "extent": [2523, 2534], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2969, 3090], "text": ["Algorithm to use to move the points.\n    Later options in the list are slower but better follow the velocity field."]}], "indent": 0, "text": ["Integration"], "role": "item", "extent": [2956, 2969], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3102, 3315], "text": ["Number of times to try projecting to the nearest point on the surface.\n    Projecting might not move exactly to the surface on the first try.\n    More iterations are slower but give more accurate projection."]}], "indent": 0, "text": ["Iterations"], "role": "item", "extent": [3090, 3102], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3325, 3536], "text": ["Number of seconds of movement to apply to the input points.\n    The default is ", {"text": ["1/$FPS"], "type": "code"}, " (one frame\u2019s worth of time).\n    You can use negative values to move the points backwards through the velocity field."]}, {"indent": 4, "type": "para", "extent": [3536, 3665], "text": ["If the attribute ", {"text": ["traillen"], "type": "code"}, " is pressent, it is multiplied by this timestep allowing per-particle variation in trail length."]}], "indent": 0, "text": ["Timestep"], "role": "item", "extent": [3315, 3325], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3675, 3838], "text": ["How many times to repeat the advection step.  This will produce a more\n    accurate motion, especially if large timesteps or high velocities are\n    present."]}], "indent": 0, "text": ["Substeps"], "role": "item", "extent": [3665, 3675], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3858, 4048], "text": ["Generate polylines instead of moving points. This is useful for visualizing the effect of the node. It may also be useful for special effects (see also the ", {"text": ["Trail SOP"], "fullpath": "/nodes/sop/trail", "scheme": "Node", "type": "link", "value": "/nodes/sop/trail"}, ")."]}], "indent": 0, "text": ["Output Streamlines"], "role": "item", "extent": [3838, 3858], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [1977, 1989], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [4075, 4129], "text": ["The points to advect are copied from this input."]}], "indent": 0, "type": "dt", "extent": [4056, 4075], "text": ["Points to Advect"]}, {"body": [{"indent": 4, "type": "para", "extent": [4143, 4199], "text": ["The VDB that stores the velocity at each location."]}], "indent": 0, "type": "dt", "extent": [4129, 4143], "text": ["Velocity VDB"]}, {"body": [{"indent": 4, "type": "para", "extent": [4218, 4279], "text": ["The VDB that stores the closest point to each location."]}], "indent": 0, "type": "dt", "extent": [4199, 4218], "text": ["Closest Point VDB"]}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [4048, 4056], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [4288, 4306], "text": [{"text": "", "fullpath": "/nodes/sop/vdb", "scheme": "Node", "type": "link", "value": "/nodes/sop/vdb"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [4306, 4332], "text": [{"text": "", "fullpath": "/nodes/sop/vdbadvectsdf", "scheme": "Node", "type": "link", "value": "/nodes/sop/vdbadvectsdf"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [4332, 4362], "text": [{"text": "", "fullpath": "/nodes/sop/vdbfromparticles", "scheme": "Node", "type": "link", "value": "/nodes/sop/vdbfromparticles"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [4362, 4386], "text": [{"text": "", "fullpath": "/nodes/sop/isooffset", "scheme": "Node", "type": "link", "value": "/nodes/sop/isooffset"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [4279, 4288], "container": true, "type": "related_section", "id": "related"}], "title": ["VDB Advect Points"], "summary": ["Moves points in the input geometry along a VDB velocity field."], "attrs": {"version": null, "tags": "create, model", "namespace": null, "internal": "vdbadvectpoints", "context": "sop", "type": "node", "icon": "COMMON/openvdb"}, "included": ["/nodes/sop/volume_types"], "type": "root"}